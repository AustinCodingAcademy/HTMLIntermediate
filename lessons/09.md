# DOM Manipulation

*Goal:* To be able to select and explore HTML elements in the DOM and to be able to move and create new elements.

# Pre-class Preperations

- [The Document Object Model](http://eloquentjavascript.net/13_dom.html)
- [Document.querySelector()](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector)
- [Document.querySelectorAll()](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)
- [CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_started/Selectors)

Much of what we have done up to this point is in preparation for this moment. True, we could write full programs that never touch the DOM, but let's face it, JavaScript's main purpose is to manipulate HTML pages. In this lesson we'll learn everything we can about doing things to the DOM.

# The Document Object Model

The **Document Object Model** or **DOM** is a JavaScript representation of a whole HTML document. As it's name hints, it is a JavaScript object. That means whenever we edit it, the HTML document in our browser changes accordingly.

## Document structure

I often find it helpful to imagine a web document as a set of boxes or containers. Take for example the following:

```html
<!DOCTYPE html>
<html>
    <head>
        <title>Austin Coding Academy</title>
    </head>
    <body>
        <h1>HTML Intermediate</h1>
        <p>I am Rob and you guys rock!</p>
        <hr>
        <p>Thanks for participating in this class. Do you know about <a href="http://reddit.com">Reddit</a>?</p>
    </body>
</html>
```

This page might also look like:

![The DOM](http://i.imgur.com/yXuKiYC.png)

The way a web browser represents a document is very similar to this. Each box is an object that has a tag, possibly some text, and other boxes. This is the *Document Object Model* or the *DOM*.

There is a global property in `document` that gives us access to the whole document. The `documentElement` prop gives us access to the `<html>` tag. Additionally, there are `head` and `body` properties that access those elements.

## Finding Elements

The first thing we'll learn is how to find arbitrary elements in the DOM. We have two main methods to grab elements, `querySelector` and `querySelectorAll`. Both of these methods can be attached to most `Node`s. Let's look at how this is done.

```javascript
// This example is targeting the HTML from the example above.
const mainHeader = document.querySelector('h1');
const paragraphs = document.querySelectorAll('p');
```

The methods `querySelector` and `querySelectorAll` both require a single argument, a CSS selector that targets an element. This can be a simple tag selector like the examples above, or something like any of the following examples (which won't work against the HTML above but are to illustrate various CSS selectors).

```javascript
document.querySelector('ul'); // grabs a single UL
document.querySelector('#header'); // grabs a single element with id="header"

document.querySelectorAll('p'); // grabs all the paragraphs
document.querySelectorAll('.subheader'); // grabs all the elements with class="subheader"
document.querySelectorAll('.nav > li'); // grabs all the LIs that are direct descendants of class="nav"
```

The method `querySelector` returns a single element while `querySelectorAll` returns a `NodeList` which is basically an array.

We can also call either method on other Node Elements.

```javascript
const lastPara = document.querySelector('hr + p'); // grabs the last paragraph
const coolLink = lastPara.querySelector('a');
```

#### Exercise Break!

> Use [Reddit](http://reddit.com) as the source for the following problems. You can do this in your console and copy the code to a .js file if you'd like.
>
> 1. Find and store the logo.
> 1. Find and store all the main titles on the front page.

## Moving through the tree

Once we have captured a node using `querySelector` or `querySelectorAll`, there are several useful properties for traversing a DOM structure. These include `childNodes`, `firstChild`, `lastChild`, `parentNode`, `previousSibling`, and `nextSibling`.

Let's grab the `<hr>` and move around from it.

```javascript
let randomElement = document.querySelector('hr');

randomElement.nextSibling; // returns <p>Thanks for participating...
randomElement.previousSibling; // returns <p>I am Rob...
randomElement.parentNode; // returns <body>
randomElement.parentNode.childNodes; // returns a NodeList with all the node children of <body>
randomElement.parentNode.firstChild; // returns <h1>HTML Intermediate</h1>
randomElement.parentNode.lastChild; // returns <p>I am Rob...
randomElement.previousSibling.previousSibling; // returns <h1>HTML Intermediate</h1>
```


#### Exercise Break!

> Use the follow HTML for the questions

```html
<!DOCTYPE html>
<html>
    <head>
        <title>Austin Coding Academy</title>
    </head>
    <body>
        <h1>Doing Lists</h1>
        <ul>
            <li>Google</li>
            <li>Yahoo</li>
            <li>Bing</li>
            <li>CompuServe</li>
            <li>Dogpile, <em>what ever happened to that?</em></li>
        </ul>
    </body>
</html>
```

> Using what we know so far,
> 
> 1. Find `<li>Google</li>`
> 1. Find `<li>Bing</li>`
> 1. Find `<ul>`
> 1. Find `<em>`
> 1. Find `<em>` a different way

# Assessment
